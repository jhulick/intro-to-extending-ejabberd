echo 'use C-A-e to expand an example'
echo '  occupants'
echo '  messages'
echo '  post_message $1'

API_KEY="52536c88-bf2b-11e2-b8c1-60c547986f44"
DEF_ROOM_NAME="testroom"
DEF_JABBER_UID="kyle"
DEF_FRIENDLY_FROM="Kyle Burton"

alias occupants="curl 'http://localhost:8088/api/admin/room/$DEF_ROOM_NAME/occupants?key=$API_KEY'"
alias messages="curl 'http://localhost:8088/api/admin/room/$DEF_ROOM_NAME/messages?key=$API_KEY'"

function post_message () {
  MSG="$1"
  ROOM_NAME="${2:-$DEF_ROOM_NAME}"
  JABBER_UID="${3:-$DEF_JABBER_UID}"
  FRIENDLY_FROM="${4:-$DEF_FRIENDLY_FROM}"
  curl -H 'Accept: application/json'  \
       -H 'Content-type: application/json' \
       -X POST \
       -d "{\"key\": \"$API_KEY\", \"from\": \"$JABBER_UID\", \"friendly_from\": \"$FRIENDLY_FROM\", \"body\": \"$MSG\"}" \
       "http://localhost:8088/api/admin/room/$ROOM_NAME/message?key=$API_KEY" 
    
}

function make_room_feel_lively () {
  post_message "HEY EURAKARTE" testroom Donut Donut
  post_message "INSULT" testroom Donut Donut
  post_message "RETORT" testroom Eurakarte Eurakarte
  post_message "COUNTER-RETORT" testroom Donut Donut
  post_message "QUESTIONING OF SEXUAL PREFERENCE" testroom Eurakarte Eurakarte
  post_message "SUGGESTION TO SHUT THE FUCK UP" testroom Donut Donut
  post_message "NOTATION THAT YOU CREATE A VACUUM" testroom Eurakarte Eurakarte
  post_message "RIPOSTE" testroom Donut Donut
  post_message "ADDON RIPOSTE" testroom Donut Donut
  post_message "COUNTER-RIPOSTE" testroom Eurakarte Eurakarte
  post_message "COUNTER-COUNTER RIPOSTE" testroom Donut Donut
  post_message "NONSENSICAL STATEMENT INVOLVING PLANKTON" testroom Eurakarte Eurakarte
  post_message "RESPONSE TO RANDOM STATEMENT AND THREAT TO BAN OPPOSING SIDES" testroom Miles_Prower Miles_Prower
  post_message "WORDS OF PRAISE FOR FISHFOOD" testroom Eurakarte Eurakarte
  post_message "ACKNOWLEDGEMENT AND ACCEPTENCE OF TERMS" testroom Miles_Prower Miles_Prower
}


#
# Bring jabber up, w/o mod_restful_admin
#   try out the curl commands showing that it's not there
# Build mod_restful_admin and dynamically load it
#   start the service dynamically
#   try out the curl commands showing that they are there
#
# dump room state to a file
#
# dynamically load mod_restful_debug
# modify a function so we can capture vars
# build and hot-load the code
# show that vars are captured by getting them from the console
#
# show generating JSON using mochi_json2 from various erlang structures
#
#
